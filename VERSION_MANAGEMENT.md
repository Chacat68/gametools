# 版本号管理说明

## 概述

gametools 现在使用统一的版本号管理系统，所有版本信息都集中在 `version.py` 文件中管理。

## 文件结构

```
gametools/
├── version.py              # 版本信息管理模块
├── gametool.py            # 主程序（已集成版本号）
├── gui/
│   ├── gametools_unified.py  # 统一GUI界面（已集成版本号）
│   └── build_unified.py      # 构建脚本（已集成版本号）
└── README.md              # 项目说明（已更新版本信息）
```

## 版本信息管理

### 版本号格式

- **主版本号**: 重大功能更新或架构变更
- **次版本号**: 新功能添加或重要改进
- **修订号**: 错误修复或小改进

### 当前版本信息

- **版本号**: v1.4.0
- **构建日期**: 2024-12-19
- **作者**: gametools开发团队
- **描述**: 游戏工具集 - 集成策划本地化、JSON检测、Excel处理、翻译提取等功能

## 版本历史

### v1.4.0 (2024-12-19)
- 添加统一的版本号管理系统
- 优化GUI界面版本显示
- 更新构建脚本以支持版本号管理

### v1.3.0 (2024年10月)
- Excel数据拆分工具多文件输出功能

### v1.2.0 (2024年10月)
- Excel工具自动文件名生成和重复检测功能

### v1.1.0 (2024年10月)
- Excel工具文件夹输出功能

### v1.0.0 (2024年10月)
- 初始版本，包含策划本地化工具和JSON格式检测工具

## 使用方法

### 1. 获取版本信息

```python
from version import get_version, format_version_string, get_description

# 获取版本号
version = get_version()  # "1.4.0"

# 获取格式化版本字符串
version_str = format_version_string()  # "v1.4.0 | 构建日期: 2024-12-19"

# 获取项目描述
description = get_description()
```

### 2. 在GUI界面中显示版本号

版本号已经自动集成到以下界面中：

- **主程序标题**: "策划本地化工具 - 越南文表格检测器 v1.4.0"
- **统一界面标题**: "gametools - 游戏工具集 v1.4.0"
- **关于页面**: 显示完整的版本信息和更新内容

### 3. 构建时包含版本信息

构建脚本会自动包含版本信息：

- **exe文件**: 标题栏显示版本号
- **exe文件名**: 自动生成带版本号的文件名（如：`gametools_v1.4.0.exe`）
- **便携版包**: 使用说明文件包含完整版本信息
- **便携版包名**: 自动生成带版本号的目录名（如：`gametools_v1.4.0_便携版`）
- **构建日志**: 显示当前构建的版本号
- **兼容性**: 同时生成不带版本号的文件，确保向后兼容

## 更新版本号

### 1. 修改版本号

编辑 `version.py` 文件中的以下变量：

```python
# 版本信息
__version__ = "1.4.0"  # 修改这里
__version_info__ = (1, 4, 0)  # 修改这里
__build_date__ = "2024-12-19"  # 修改这里
```

### 2. 添加版本历史

在 `VERSION_HISTORY` 字典中添加新版本信息：

```python
VERSION_HISTORY = {
    "1.5.0": {  # 新版本
        "date": "2024-12-20",
        "changes": [
            "新功能描述1",
            "新功能描述2",
            "错误修复描述"
        ]
    },
    # ... 其他版本
}
```

### 3. 更新相关文件

更新以下文件中的版本信息：

- `README.md`: 更新版本号和更新历史
- 其他文档文件中的版本引用

## 测试版本号

运行以下命令测试版本号功能：

```bash
# 测试版本信息模块
python version.py

# 测试GUI界面版本显示
python gametool.py
python gui/gametools_unified.py

# 测试构建脚本（在gui目录中运行）
cd gui
python build_unified.py
```

### 构建输出示例

构建完成后会生成以下文件：

```
dist/
├── gametools_v1.4.0.exe          # 主程序（带版本号）
├── gametools.exe                 # 主程序（兼容性版本）
├── gametools_v1.4.0_便携版/      # 便携版包（带版本号）
│   ├── gametools.exe
│   └── 使用说明.txt
└── gametools_便携版/             # 便携版包（兼容性版本）
    ├── gametools.exe
    └── 使用说明.txt
```

## 注意事项

1. **版本号一致性**: 确保所有文件中的版本号保持一致
2. **构建日期**: 每次发布新版本时更新构建日期
3. **版本历史**: 详细记录每个版本的更新内容
4. **向后兼容**: 考虑版本升级时的向后兼容性

## 自动化建议

可以考虑添加以下自动化功能：

1. **自动版本号递增**: 基于Git标签自动生成版本号
2. **自动构建日期**: 使用当前日期自动设置构建日期
3. **版本检查**: 在启动时检查版本更新
4. **版本日志**: 自动生成版本更新日志

## 技术支持

如有版本号管理相关的问题，请联系开发团队。
